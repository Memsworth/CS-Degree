
## 1) Centralized DBMS Architectures
- Database (DB) and DBMS stored in a central computer.
- Accessed by several other systems.

## 2) Client-Server Architecture
- **Client-Server** consists of clients and servers connected via a network.
  - **Client:** Provides UI & processing to run local apps.
  - **Server:** Provides services to clients and processes requests from clients.
    - File server maintains client machine files and presents them on demand.

---

### DBMS Architectures Based on Client-Server
There are two types:
1. **Two-tier Architecture**
2. **Three-tier Architecture**

### Two-tier Architecture:
- Components are distributed over clients and servers.
  - **Client:** UI & apps.
  - **Server:** Performs SQL & transactions (query or transaction server).
- Process:
  - Client establishes connection to server.
  - Client sends query and transaction request via ODBC.
  - Server processes and sends back the result.

### Three-tier Architecture:
- Components: **Client** (UI), **Middle Layer** (app server or web server), and **Server** (DBMS).
  - **Client:** Web browser/UI.
  - **Middle Layer:** Between client and server, improves security by forwarding requests to the server and sending results back to the client.
  - **Server:** Processes DB queries and sends results to the middle layer.

---

## 3) Distributed Database System
- DBMS and DB are distributed across multiple sites (nodes), connected through a network.
- Uses **fragmentation** and **replication**.
  
### Parallel DB:
- Multiple processors and disks connected via an intercommunication network.
- Data is distributed across different disks.
- **Advantage:** Queries are executed by dividing tasks among multiple processors.

---

## 4) Three-Layer Architecture
The main purpose of DBMS is to provide an abstract view of data.

- **ANSI/SPARC Architecture**:
  - Three layers: **View**, **Logical**, **Physical**.
  - There are many views, but only one logical and one physical schema.

### Physical Layer:
- Deals with **how** data is stored.
- Describes complex low-level data structures.
- Only accessible to the DBA (Database Administrator).
- Parameters: size, isolation level, disk space, memory, index, secondary storage.

### Logical Layer:
- Defines **what** data is stored and the relationships between the data.
- Used by both DBA and application developers.
- Changes at the physical level do not affect the logical level.

### View Layer:
- The database has multiple views.
- Users only have access to certain views.
- The view layer hides logical details and reduces complexity.
- Works as a security mechanism to prevent unauthorized access.

### Mappings:
- **Conceptual to Internal Mapping**: Between DB and logical view, describing how conceptual records are presented. Changes in DB structure require mapping changes, managed by the DBA.
- **External to Conceptual Mapping**: Between external views and conceptual view. Changes in external or conceptual views require mapping changes.

---

## 5) Data Independence
- **Data Independence**: The ability to change the schema at one level without affecting higher levels (e.g., application programs).
  
### Types:
1. **Physical Data Independence**: 
   - Allows changing the structure of the DB without affecting views.
   - Conceptual/Internal level mapping needs to change if physical structure changes.
   
2. **Logical Data Independence**: 
   - Allows changes in the conceptual schema without affecting external schemas or application programs.
   - Changes in the conceptual schema can expand the database without changing the external views or app programs.

---

## 6) Database Schema
- **Schema**: The design of a database. It does not show data; it is the structure that is not frequently changed.
- Levels of abstraction:
  - **Physical**: Describes DB design and the physical level.
  - **Logical**: Describes the logical level. This is the most important level, where app development occurs.
  - **View**: Different views are used by various users.

### Instance:
- Refers to the data stored in the DB at a particular moment.
- Includes insertions, updates, and deletions.

---

## 7) Database System Structure
Different types of users interact with the DB through different types of applications.
- **Programs** (ORMs) and **Users** (Apps).

### Components of the Database System:
1. **Query Processor**  
2. **Storage Manager**

### Storage Manager:
- Minimizes the movement of data between disk and main memory.

### Query Processor:
- Simplifies data access for users.

#### Query Processor Components:
1. **DDL Interpreter**: Converts DDL statements into a data dictionary.
2. **DML Compiler**: Converts DML into an evaluation plan with low-level instructions and performs query optimization.
3. **Query Evaluation Engine**: Executes the low-level instructions generated by the DML compiler.

#### Storage Manager Components:
1. **Authorization and Integrity Manager**: Manages user authentication and integrity constraints.
2. **Transaction Manager**: Ensures DB consistency and handles concurrent transactions.
3. **File Manager**: Manages space allocation on the disk and represents data on disk.
4. **Buffer Manager**: Fetches data from disk to memory and manages what to cache.

### Physical DB:
1. **Data Files**: Stores the actual database.
2. **Data Dictionary**: Stores metadata, describing the structure (schema) of the database.
3. **Indices**: Provides fast access to data items.
4. **Statistical Data**: Used for query optimization and planning.

---

## 8) Integrity Constraints
Integrity constraints are rules enforced on columns, ensuring data quality.

### Types of Integrity Constraints:
1. **Domain Constraints**: Defines the valid set of values for an attribute (e.g., `age` must be an integer).
2. **Entity Constraints**: Ensures the primary key cannot be null.
3. **Referential Constraints**: Ensures that a foreign key in one table matches a primary key in another.
4. **Key Constraints**: Ensures the uniqueness of an entity within a set.

---

## 9) SQL Constraints

### Primary Key
- Ensures each row in the table is unique.
- Cannot be null.
- Can be composite (involving multiple columns).

```sql
CREATE TABLE r (
  id INT PRIMARY KEY, 
  name VARCHAR(5) NOT NULL
);
```

### Table-Level Primary Key
```sql
CREATE TABLE r (
  id INT, 
  name CHAR(5) NOT NULL, 
  PRIMARY KEY(id)
);
```

### Composite Primary Key (Table Level)
```sql
CREATE TABLE r (
  id INT, 
  name VARCHAR(5), 
  PRIMARY KEY(id, name)
);
```

### Foreign Key
- Relates to the primary key of another table.

#### Column-Level Foreign Key
```sql
CREATE TABLE c (
  id INT PRIMARY KEY, 
  name VARCHAR(5), 
  foreign_id INT REFERENCES r(id)
);
```

#### Table-Level Foreign Key
```sql
CREATE TABLE c (
  id INT, 
  name VARCHAR(5), 
  foreign_id INT, 
  PRIMARY KEY(id), 
  FOREIGN KEY(foreign_id) REFERENCES r(id)
);
```

### Not Null Constraint
- Restricts a column from having null values.
- Default for every attribute unless specified otherwise.
- Primary keys cannot be null.

### Unique Constraint
- Ensures that a column or set of columns contains only unique values.

#### Column-Level Unique
```sql
CREATE TABLE c (
  id INT PRIMARY KEY, 
  name VARCHAR(5) UNIQUE, 
  foreign_id INT REFERENCES r(id)
);
```

#### Table-Level Unique
```sql
CREATE TABLE c (
  id INT, 
  name VARCHAR(5), 
  foreign_id INT, 
  PRIMARY KEY(id), 
  FOREIGN KEY(foreign_id) REFERENCES r(id), 
  CONSTRAINT emp UNIQUE(name)
);
```

### Check Constraint
- Restricts values of attributes to a permitted range.

#### Example:
```sql
CREATE TABLE c (
  id INT PRIMARY KEY, 
  name VARCHAR(5) UNIQUE, 
  salary INT NOT NULL CHECK(salary > 0), 
  foreign_id INT REFERENCES r(id)
);
```

### Default Constraint
- Inserts a default value into a column if no value is provided.

#### Example:
```sql
CREATE TABLE c (
  id INT PRIMARY KEY, 
  name VARCHAR(5) UNIQUE, 
  salary INT NOT NULL CHECK(salary > 0) DEFAULT 5, 
  foreign_id INT REFERENCES r(id)
);
```

